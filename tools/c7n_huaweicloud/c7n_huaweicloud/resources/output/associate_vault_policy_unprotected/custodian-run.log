2025-03-22 16:15:53,808 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:15:54,722 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 625a8976572a837f1d7729e598e02699, Reason: Vault Not Found
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/%7Bvault_id%7D/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 100, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:625a8976572a837f1d7729e598e02699,error_code:BackupService.6105,error_msg:Vault Not Found,encoded_authorization_message:None }
2025-03-22 16:15:54,766 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 3c920469f4af743cc01d3de2c1d5dc21, Reason: Vault Not Found
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/%7Bvault_id%7D/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 100, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:3c920469f4af743cc01d3de2c1d5dc21,error_code:BackupService.6105,error_msg:Vault Not Found,encoded_authorization_message:None }
2025-03-22 16:15:54,768 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:0.96
2025-03-22 16:17:07,327 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:17:08,285 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 2b3d92138db7c81603b0ca9d4d347201, Reason: Vault Not Found
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/%7Bvault_id%7D/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 100, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:2b3d92138db7c81603b0ca9d4d347201,error_code:BackupService.6105,error_msg:Vault Not Found,encoded_authorization_message:None }
2025-03-22 16:17:08,432 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 170fe7d54329252b51e8f3ce698a3858, Reason: Vault Not Found
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/%7Bvault_id%7D/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 100, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:170fe7d54329252b51e8f3ce698a3858,error_code:BackupService.6105,error_msg:Vault Not Found,encoded_authorization_message:None }
2025-03-22 16:17:08,433 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:1.11
2025-03-22 16:23:38,069 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:23:38,070 - custodian.huaweicloud.client - ERROR - No default region set. Specify a default via HUAWEI_DEFAULT_REGION
2025-03-22 16:23:38,070 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/c7n/policy.py", line 364, in run
    results = a.process(resources)
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 94, in perform_action
    client = self.manager.get_client()
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 115, in get_client
    session = local_session(self.session_factory)
  File "/root/huawei_custodian/cloud-custodian/c7n/utils.py", line 334, in local_session
    s = factory()
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/client.py", line 29, in __init__
    sys.exit(1)
    ~~~~~~~~^^^
SystemExit: 1
2025-03-22 16:25:45,783 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:25:46,616 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 24ba2df96e4711dcf4a2acd9a4308f32, Reason: Vault Not Found
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/%7Bvault_id%7D/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 100, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:24ba2df96e4711dcf4a2acd9a4308f32,error_code:BackupService.6105,error_msg:Vault Not Found,encoded_authorization_message:None }
2025-03-22 16:25:46,709 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: e9dcd0f44edd614330bcb909a887ed86, Reason: Vault Not Found
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/%7Bvault_id%7D/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 100, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:e9dcd0f44edd614330bcb909a887ed86,error_code:BackupService.6105,error_msg:Vault Not Found,encoded_authorization_message:None }
2025-03-22 16:25:46,711 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:0.93
2025-03-22 16:48:39,785 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.94
2025-03-22 16:48:40,035 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 88159dfb193b2206254ad18896166946, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:88159dfb193b2206254ad18896166946,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:48:40,294 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 87fc76b26ede2911e21630f83e35bf0c, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:87fc76b26ede2911e21630f83e35bf0c,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:48:40,296 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:0.51
2025-03-22 16:49:47,892 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:49:48,889 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 06d889a53e6f43a620d9525e6218032a, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:06d889a53e6f43a620d9525e6218032a,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:49:49,048 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: e84fdf53219e8a8c0b288e560ce57b22, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:e84fdf53219e8a8c0b288e560ce57b22,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:49:49,050 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:1.16
2025-03-22 16:51:35,119 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:51:36,123 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 34f01d01287f3576e5ff2cd9b401b89f, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 102, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:34f01d01287f3576e5ff2cd9b401b89f,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:51:36,274 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 4f6fc0fdb7814c8e77debbe86cbf3a9b, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 102, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:4f6fc0fdb7814c8e77debbe86cbf3a9b,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:51:36,276 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:1.16
2025-03-22 16:52:13,984 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:52:14,995 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 2f6422458ed4965f45efdd8a3887a9dc, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 102, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:2f6422458ed4965f45efdd8a3887a9dc,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:52:15,250 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 628dd71e3eec8bffa50ec5f563de83bb, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 102, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:628dd71e3eec8bffa50ec5f563de83bb,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:52:15,251 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:1.27
2025-03-22 16:52:32,152 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:52:33,214 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: c99283badff1d512e4715ce3c955860a, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:c99283badff1d512e4715ce3c955860a,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:52:33,359 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 10ff350d245035d4730d12e4e7ac2867, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:10ff350d245035d4730d12e4e7ac2867,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:52:33,361 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrvaultupdatepolicy resources:1 execution_time:1.21
2025-03-22 16:55:27,585 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:55:28,551 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 42da2015-a512-481a-9c86-f02c08cffc10 RequestId: 5107f1a4ea6cb21433c731dbe4624c8a, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:5107f1a4ea6cb21433c731dbe4624c8a,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:55:28,731 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - 78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92 RequestId: 0b3d0b17fefaace2fdbee45515169ed4, Reason: Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:404,request_id:0b3d0b17fefaace2fdbee45515169ed4,error_code:BackupService.6000,error_msg:Policy 2295723b-8176-4daa-8490-fc4b265c9f48 not found.,encoded_authorization_message:None }
2025-03-22 16:55:28,733 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:1 execution_time:1.15
2025-03-22 16:59:00,196 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:59:01,395 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - f52b25cd-b7af-46cc-9c04-3a5b21e23209 RequestId: 2a7ed9ce71159f57cbced78c5f7ec75c, Reason: Protect type Not allowed to policy
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/f52b25cd-b7af-46cc-9c04-3a5b21e23209/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:2a7ed9ce71159f57cbced78c5f7ec75c,error_code:BackupService.6116,error_msg:Protect type Not allowed to policy,encoded_authorization_message:None }
2025-03-22 16:59:01,397 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:2 execution_time:1.20
2025-03-22 16:59:07,910 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 16:59:09,133 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - f52b25cd-b7af-46cc-9c04-3a5b21e23209 RequestId: 3c74f59c2ba20fc07317c87eae8cf270, Reason: Protect type Not allowed to policy
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/f52b25cd-b7af-46cc-9c04-3a5b21e23209/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:3c74f59c2ba20fc07317c87eae8cf270,error_code:BackupService.6116,error_msg:Protect type Not allowed to policy,encoded_authorization_message:None }
2025-03-22 16:59:09,135 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:2 execution_time:1.22
2025-03-22 17:02:35,854 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:0.00
2025-03-22 17:02:36,994 - custodian.huaweicloud.actions.base - ERROR - Unable to submit action against the resource - f52b25cd-b7af-46cc-9c04-3a5b21e23209 RequestId: e2951789036e1bef3a56d732305b42b8, Reason: Protect type Not allowed to policy
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/0d9da8861b80f5a32fb4c00645f2dbd7/vaults/f52b25cd-b7af-46cc-9c04-3a5b21e23209/associatepolicy

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/actions/base.py", line 33, in process
    self.perform_action(resource)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/resources/cbr_vault.py", line 101, in perform_action
    response = client.associate_vault_policy(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 249, in associate_vault_policy
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:400,request_id:e2951789036e1bef3a56d732305b42b8,error_code:BackupService.6116,error_msg:Protect type Not allowed to policy,encoded_authorization_message:None }
2025-03-22 17:02:36,996 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:2 execution_time:1.14
2025-03-24 22:07:33,652 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:0 time:1.24
2025-03-25 09:53:39,062 - custodian.output - ERROR - Error while executing policy
Traceback (most recent call last):
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 127, in response_hook
    resp.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/custodian/lib/python3.13/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/vaults?limit=100&offset=0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/huawei_custodian/cloud-custodian/c7n/policy.py", line 330, in run
    resources = self.policy.resource_manager.resources()
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 153, in resources
    resources = self._fetch_resources(q)
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 172, in _fetch_resources
    return self.augment(self.source.get_resources(query)) or []
                        ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 74, in get_resources
    return self.query.filter(self.manager, **query)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 28, in filter
    resources = self._pagination_limit_offset(m, enum_op, path)
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 45, in _pagination_limit_offset
    response = self._invoke_client_enum(client, enum_op, request)
  File "/root/huawei_custodian/cloud-custodian/tools/c7n_huaweicloud/c7n_huaweicloud/query.py", line 62, in _invoke_client_enum
    return getattr(client, enum_op)(request)
           ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 2457, in list_vault
    return self._call_api(**http_info)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcbr/v1/cbr_client.py", line 4792, in _call_api
    return self.do_http_request(**kwargs)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 480, in do_http_request
    response = self._do_http_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/client.py", line 531, in _do_http_request_sync
    response = self._http_client.do_request_sync(request)
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 100, in do_request_sync
    self.response_error_hook_factory()(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/http/http_client.py", line 129, in response_hook
    self._exception_handler.handle_exception(httpError.request, httpError.response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/custodian/lib/python3.13/site-packages/huaweicloudsdkcore/exceptions/exception_handler.py", line 75, in handle_exception
    raise exceptions.ClientRequestException(response.status_code, sdk_error) if response.status_code < 500 \
        else exceptions.ServerResponseException(response.status_code, sdk_error)
huaweicloudsdkcore.exceptions.exceptions.ClientRequestException: ClientRequestException - {status_code:401,request_id:de94937e8382327e36c5785268a26563,error_code:APIGW.0301,error_msg:Incorrect IAM authentication information: get token error,status:400,encoded_authorization_message:None }
2025-03-25 09:54:54,814 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:0 time:1.51
2025-03-25 10:24:12,949 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:0 time:1.39
2025-03-25 10:33:25,208 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:2 time:1.54
2025-03-25 10:33:25,941 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:2 execution_time:0.73
2025-03-25 11:58:23,749 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:1 time:1.52
2025-03-25 11:58:24,072 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:1 execution_time:0.32
2025-03-25 11:59:09,950 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:2 time:1.26
2025-03-25 11:59:10,669 - custodian.policy - INFO - policy:associate_vault_policy_unprotected action:cbrassociatevaultpolicy resources:2 execution_time:0.72
2025-03-25 12:07:05,610 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:0 time:1.34
2025-03-25 16:29:53,095 - custodian.policy - INFO - policy:associate_vault_policy_unprotected resource:huaweicloud.cbr-vault region: count:3 time:1.77
